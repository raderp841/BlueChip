@using BlueChip.Models;
@model List<ProductModel>

@{
    UserInfoModel user = Session["User"] as UserInfoModel;
    double total = 0;

}
<div class="text-center">
    @if (Session["User"] != null)
    {
        <h2 class="text-center">@user.FirstName.ToUpper()'S CART</h2>
        if (Model.Count == 0)
        {
            <h3>You have no items in your cart</h3>
        }
        else
        {
            if (Model.Count == 1)
            {
                <h3 class="cartCount">You have @Model.Count item</h3>
            }
            else
            {
                <h3 class="cartCount">You have @Model.Count items </h3>
            }
            <button class="btn btn-success" onclick="showCart()" id="showCart">Show my Cart</button>
            <div id="cart-list">
                <div class="text-center">

                    @foreach (var product in Model)
                    {
                        <h3>@product.Named: <span>$@product.Price</span><span class="deleteItem" onclick="deleteItem(@product.Id, @user.Id, @product.Price)">x</span><hr /></h3>
                        total += product.PriceDec;
                        
                    }
                        <h2 id="subTotal">Sub Total: $<span id="total">@total</span></h2>
                    <button class="btn btn-success" onclick="hideCart()">Hide Cart</button>
                </div>

            </div>
        }
    }

    else
    {
        <a class="btn btn-block" href="@Url.Action("LoginRegister", "Home")" )>Login or Register</a>
    }
</div>
<script src="~/Js/Cart.js"></script>